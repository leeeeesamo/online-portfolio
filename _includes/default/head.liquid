<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    <!-- Theme Mode-->
    <script>
        const darkBtn = "{{ site.data.language.str_dark | default: 'Dark' }}";
        const lightBtn = "{{ site.data.language.str_light | default: 'Light' }}";
        const isAutoTheme = {% if site.color_theme == 'auto' %}true{% else %}false{% endif %};
        const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        if (isAutoTheme) {
            document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme') ?? preferredTheme);
        } else {
            document.documentElement.setAttribute('data-theme', "{{ site.color_theme | default: 'light' }}");
        }
    </script>

    <!-- Main JS -->
    <script defer src="{{ '/assets/js/main.min.js' | relative_url }}"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    {% if page.bootstrap %}
        <link rel="stylesheet" type="text/css" href="{{ '/assets/css/vendor/bootstrap-iso.min.css' | relative_url }}">
    {% endif %}

    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ site.favicon | relative_url }}" type="image/x-icon">

    <!-- KaTeX -->
    {% if site.katex %}
        <script defer src="{{ '/assets/js/vendor/katex.min.js' | relative_url }}"></script>
        <script defer src="{{ '/assets/js/vendor/katex.auto-render.min.js' | relative_url }}" onload="renderMathInElement(document.body);"></script>
    {% endif %}

    <!-- Mermaid -->
    {% if site.mermaid %}
        <script defer src="{{ '/assets/js/vendor/mermaid.min.js' | relative_url }}"></script>
    {% endif %}

    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-62GQJMN2DP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-62GQJMN2DP');
    </script>

    <!-- SEO Tags -->
    <meta property="og:image" content="{{ '/' | absolute_url }}{% if page.thumbnail %}{{ page.thumbnail }}{% else %}{{ page.feature-img | default: site.header_feature_image }}{% endif %}">
    {% unless page.layout == post %}
    <meta property="og:type" content="website" />
    {% endunless %}
    {% seo %}

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="{{ site.title | default: 'Title' }}" href="{{ 'feed.xml' | absolute_url }}" />
    {% feed_meta %}

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="{{ page.title | default: site.title }}">
    <meta name="twitter:description" content="{{ page.content | default: site.header_text | strip_html | strip_newlines | truncate: 160 }}">
    {% if site.data.social.twitter %}
    <meta name="twitter:creator" content="@{{ site.data.social.twitter }}">
    <meta name="twitter:site" content="@{{ site.data.social.twitter }}">
    {% endif %}
    <meta name="twitter:card" content="{% unless page.thumbnail %}summary{% else %}summary_large_image{% endunless %}">
    <meta name="twitter:image" content="{{ '/' | absolute_url }}{% if page.thumbnail %}{{ page.thumbnail }}{% else %}{{ page.feature-img | default: site.header_feature_image }}{% endif %}">
    <meta name="twitter:image:alt" content="{{ page.title | default: site.title }}">
</head>
